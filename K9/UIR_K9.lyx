#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass extarticle
\begin_preamble
%Дополнения
\usepackage{rotating}		%для вращения
\usepackage{caption}		%для подписей
\usepackage{lastpage}		%подсчёт страниц
\usepackage{indentfirst}	%красная строка
\usepackage{array}
\usepackage{longtable}
\usepackage{float}
\usepackage{multirow}
\usepackage{graphicx}		%поддержка графики
\usepackage{setspace}
\usepackage{hhline}		%горизонтальные линии
\usepackage{ifthen}		%условия
\usepackage{ifxetex}		%проверки для XeTeX
\usepackage{footmisc}		%настраивать сноски
\usepackage{listings}
\usepackage{pdflscape}

%XeTeX-овский дзен
\ifxetex
\usepackage{xecyr} %нужно, если используется babel

%Нужно для автозамены кавычек и тире
\defaultfontfeatures{Mapping=tex-text}
%без этого не работает шрифт...
\newfontfamily\russianfont{Times New Roman}
%шрифты, обычные, трутайповские
\setmainfont{Times New Roman}
\setmonofont[Scale=0.915]{Nimbus Mono L}

%ещё один баг XeTeX! Не работают листинги с русскими буквами, печаль... Пришлось кинуть алиас на вербатим.
\usepackage{verbatim}
\usepackage{spverbatim}

\def\verbatim@processline{\hspace{1.2cm}\raggedright\the\verbatim@line\par}
\renewenvironment{lstlisting}{\spverbatim}{\endverbatim}

\else %если не ХеТеХ а обычный ТеХ

%пока отменил, с ХеТеХ работает криво
%Это то что нужно для того, чтобы листинги выводились с моноширинным шрифтом
\lstset{
breaklines=true,                % sets automatic line breaking
basicstyle=\ttfamily\footnotesize,
%отступ примерно 4 пробела
breakindent={-1.2cm},
xleftmargin=0.5cm
}

\fi

%русские буквы в нумерации
\renewcommand\theenumii{\asbuk{enumii}}

\sloppy %не вылезать за края листа
\end_preamble
\use_default_options true
\begin_modules
eqs-within-sections
figs-within-sections
\end_modules
\maintain_unincluded_children false
\language russian
\language_package default
\inputencoding koi8-r
\fontencoding global
\font_roman default
\font_sans default
\font_typewriter cmtt
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 90

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize 12
\spacing single
\use_hyperref true
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref false
\pdf_pdfusetitle true
\papersize default
\use_geometry true
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine basic
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\use_refstyle 1
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 2cm
\topmargin 2cm
\rightmargin 2cm
\bottommargin 2cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\quotes_language french
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\align center

\size large
МИНИСТЕРСТВО ОБРАЗОВАНИЯ И НАУКИ РОССИЙСКОЙ ФЕДЕРАЦИИ
\end_layout

\begin_layout Standard
\align center

\size larger
Федеральное государственное автономное образовательное учреждение 
\begin_inset Newline newline
\end_inset

высшего профессионального образования
\end_layout

\begin_layout Standard
\align center

\series bold
\size larger
\begin_inset Quotes fld
\end_inset

Национальный
\begin_inset space \space{}
\end_inset

исследовательский
\begin_inset space \space{}
\end_inset

ядерный
\begin_inset space \space{}
\end_inset

университет 
\begin_inset Quotes fld
\end_inset

МИФИ
\begin_inset Quotes frd
\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="14cm">
<row>
<cell multirow="3" alignment="left" valignment="middle" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename files/mephi.png

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
\size larger
Факультет
\begin_inset space \space{}
\end_inset

кибернетики
\begin_inset space \space{}
\end_inset

и
\begin_inset space \space{}
\end_inset

информационной безопасности
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
Кафедра №36
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 1cm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size largest
ПОЯСНИТЕЛЬНАЯ ЗАПИСКА 
\end_layout

\begin_layout Standard
\align center

\size large
к курсовому проекту на тему: 
\end_layout

\begin_layout Standard
\align center

\size large
\color black
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="16.4cm">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Методы авторизации
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
в системе управления базами данных PostgreSQL
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 2cm
\end_inset


\end_layout

\begin_layout Standard

\size large
Группа  
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
К9-361
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard

\size large
Студент 
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="6.8cm">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Воронин Д.Л.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 6cm
\end_inset

(подпись)
\begin_inset space \hspace{}
\length 5cm
\end_inset

(ФИО)
\end_layout

\begin_layout Standard

\size large
Руководитель проекта 
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="4.1cm">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Муравьев С.К.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 6cm
\end_inset

(подпись)
\begin_inset space \hspace{}
\length 5cm
\end_inset

(ФИО)
\end_layout

\begin_layout Standard

\size large
Оценка 
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="14.2cm">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard

\size large
Члены комиссии 
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="5.2cm">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 6cm
\end_inset

(подпись)
\begin_inset space \hspace{}
\length 5cm
\end_inset

(ФИО)
\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 3.3cm
\end_inset


\size large

\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="5.2cm">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 6cm
\end_inset

(подпись)
\begin_inset space \hspace{}
\length 5cm
\end_inset

(ФИО)
\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 3.3cm
\end_inset


\size large

\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="5.2cm">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 6cm
\end_inset

(подпись)
\begin_inset space \hspace{}
\length 5cm
\end_inset

(ФИО)
\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 3.3cm
\end_inset


\size large

\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="5.2cm">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 6cm
\end_inset

(подпись)
\begin_inset space \hspace{}
\length 5cm
\end_inset

(ФИО)
\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
thispagestyle{empty}
\end_layout

\end_inset


\series bold
Москва 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
the
\backslash
year
\end_layout

\end_inset

г.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
МИНИСТЕРСТВО ОБРАЗОВАНИЯ И НАУКИ РОССИЙСКОЙ ФЕДЕРАЦИИ
\end_layout

\begin_layout Standard
\align center

\size larger
Федеральное государственное автономное образовательное учреждение 
\begin_inset Newline newline
\end_inset

высшего профессионального образования
\end_layout

\begin_layout Standard
\align center

\series bold
\size larger
\begin_inset Quotes fld
\end_inset

Национальный исследовательский ядерный университет 
\begin_inset Quotes fld
\end_inset

МИФИ
\begin_inset Quotes frd
\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="14cm">
<row>
<cell multirow="3" alignment="left" valignment="middle" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Graphics
	filename files/mephi.png

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ФАКУЛЬТЕТ КИБЕРНЕТИКИ И ИНФОРМАЦИОННОЙ 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
БЕЗОПАСНОСТИ
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
КАФЕДРА ИНФОРМАЦИОННЫЕ СИСТЕМЫ И ТЕХНОЛОГИИ
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 0.5cm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size largest
Задание на УИР и КП
\end_layout

\begin_layout Standard
\begin_inset VSpace 1cm
\end_inset


\end_layout

\begin_layout Standard

\size large
Студенту гр.
 
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\size large
К9-361 Воронину Дмитрию Леонидовичу
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 1cm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size larger
Тема УИР и КП
\end_layout

\begin_layout Standard
\align center

\size large
\color black
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="16.4cm">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Методы авторизации 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
в системе управления базами данных PostgreSQL
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 1cm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size large
ЗАДАНИЕ
\end_layout

\begin_layout Standard
\align center

\size large
\begin_inset Tabular
<lyxtabular version="3" rows="11" columns="1">
<features tabularvalignment="middle">
<column alignment="left" valignment="top" width="0">
<row>
<cell alignment="left" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.
 Исследовать основные методы авторизации в PostgreSQL(Kerberos, Ident, Peer,
 PAM) и оценить возможность
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
их использования в качестве основного метода авторизации.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.
 Исследовать метод авторизации LDAP и выявить его достоинства и недостатки.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3.
 Развернуть стенд из 3х машин, демонстрирующий принцип 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
работы метода авторизации LDAP в PostgreSQL.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.
 Исследовать возможность интеграции SELinux с OpenLDAP.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Standard
\align left

\size small
\begin_inset space \hspace{}
\length 3.3cm
\end_inset


\size default
Место выполнения УИР и КП 
\size large

\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="1">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="4.8cm">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ФГУП 
\begin_inset Quotes fld
\end_inset

ЦНИИ ЭИСУ
\begin_inset Quotes frd
\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align left

\size small
\begin_inset space \hspace{}
\length 3.3cm
\end_inset


\size default
Руководитель 
\size large

\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="3.8cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Муравьев С.К.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
(
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard

\size small
\begin_inset space \hspace{}
\length 2.7cm
\end_inset


\size default
Дата выдачи задания
\size small
 
\size large

\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Quotes fld
\end_inset

1
\begin_inset Quotes frd
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
сентября
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
the
\backslash
year
\end_layout

\end_inset

г.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
thispagestyle{empty}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
ОТЗЫВ О РАБОТЕ СТУДЕНТА
\end_layout

\begin_layout Standard
\begin_inset VSpace 2cm
\end_inset


\end_layout

\begin_layout Standard
Руководитель 
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="6cm">
<column alignment="center" valignment="top" width="4cm">
<column alignment="center" valignment="top" width="1cm">
<column alignment="center" valignment="top" width="0">
<row>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Муравьев С.К.
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Quotes fld
\end_inset


\begin_inset Quotes frd
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
the
\backslash
year
\end_layout

\end_inset

г.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section*
Введение
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
addcontentsline{toc}{part}{Введение}
\end_layout

\end_inset


\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Обзор основных методов авторизации PostgreSQL
\end_layout

\begin_layout Subsection
Kerberos
\end_layout

\begin_layout Standard
Протокол 
\series bold
Kerberos
\series default
 
\begin_inset CommandInset citation
LatexCommand cite
key "Kerberos"

\end_inset

 был создан более десяти лет назад в Массачусетском технологическом институте
 в рамках проекта Athena.
 Однако общедоступным этот протокол стал, начиная с версии 4.
 После того, как специалисты изучили новый протокол, авторы разработали
 и предложили очередную версию --- Kerberos 5, которая была принята в качестве
 стандарта IETF.
 Требования реализации протокола изложены в документе RFC 1510 
\begin_inset CommandInset citation
LatexCommand cite
key "Kerberos-man"

\end_inset

, кроме того, в спецификации RFC 1964 описывается механизм и формат передачи
 жетонов безопасности в сообщениях Kerberos.
\end_layout

\begin_layout Standard
Протокол Kerberos предлагает механизм взаимной аутентификации клиента и
 сервера перед установлением связи между ними, причем в протоколе учтен
 тот факт, что начальный обмен информацией между клиентом и сервером происходит
 в незащищенной среде, а передаваемые пакеты могут быть перехвачены и модифициро
ваны.
 Другими словами, протокол идеально подходит для применения в Интернет и
 аналогичных сетях.
 
\end_layout

\begin_layout Subsubsection
Основные концепции
\end_layout

\begin_layout Standard
В основе этой системы Kerberos лежит несколько простых принципов:
\end_layout

\begin_layout Itemize
в сетях, использующих систему безопасности Kerberos, все процедуры аутентификаци
и между клиентами и серверами сети выполняются через систему-посредника,
 которому доверяют обе стороны аутентификационного процесса, причем таким
 авторитетным арбитром является сама система Kerberos.
\end_layout

\begin_layout Itemize
в системе Kerberos клиент должен доказывать свою аутентичность для доступа
 к каждой службе, услуги которой он вызывает.
\end_layout

\begin_layout Itemize
все обмены данными в сети выполняются в защищенном виде с использованием
 алгоритма шифрования DES.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsubsection
Аутентификаторы
\end_layout

\begin_layout Standard
Простой протокол аутентификации (на 
\emph on
рис.

\emph default
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Пример-простого-протокола"

\end_inset

) с секретным ключом вступает в действие, когда кто-то стучится в сетевую
 дверь и просит впустить его.
 Чтобы доказать свое право на вход, пользователь предъявляет аутентификатор
 (
\emph on
authenticator
\emph default
) в виде набора данных, зашифрованного секретным ключом.
 Получив аутенитификатор, привратник расшифровывает его и проверяет полученную
 информацию, чтобы убедиться в успешности дешифрования.
 Разумеется, содержание набора данных должно постоянно меняться, иначе злоумышле
нник может просто перехватить пакет и воспользоваться его содержимым для
 входа в систему.
 Если проверка прошла успешно, то это значит, что посетителю известен секретный
 код, а так как этот код знает только он и привратник, следовательно, пришелец
 на самом деле тот, за кого себя выдает.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/Key.png
	scale 65

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Пример-простого-протокола"

\end_inset

Простой протокол шифрования
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Может случиться и так, что посетитель захочет провести взаимную аутентификацию.
 В этом случае используется тот же самый протокол, но с некоторыми изменениями
 и в обратном порядке.
 Теперь привратник извлекает из исходного аутентификатора часть информации,
 а затем шифрует ее, превращая в новый аутентификатор, и передает обратно
 посетителю.
 Тот, в свою очередь, расшифровывает информацию и сравнивает ее с исходной.
 Если все совпадает --- значит, привратник знает секретный ключ.
\end_layout

\begin_layout Standard
При этом в данном случае возникают следующие проблемы:
\end_layout

\begin_layout Enumerate

\emph on
Управление ключами.

\emph default
 Создание ключа, который принимали бы клиент и сервер при их взаимной передаче
 данных.
 Т.е.
 клиенту и серверу требуется договориться о выборе ключа, чтобы получить
 доступ друг к другу.
\end_layout

\begin_layout Enumerate

\emph on
Хранение ключа
\emph default
.
 Если клиенту требуется соединение с несколькими серверами, то ему требуется
 иметь ключ для каждого сервера.
 Соответственно, серверу нужно хранить каждый ключ клиента, подключенный
 к нему.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsubsection
Управление ключами
\end_layout

\begin_layout Standard
Само название протокола Kerberos говорит о том, как здесь решена проблема
 управления ключами.
 Кербер (или Цербер) --- персонаж классической греческой мифологии.
 Этот свирепый пес о трех головах, по поверьям греков, охраняет врата подземного
 царства мертвых.
 Трем головам Кербера в протоколе Kerberos соответствуют три участника безопасно
й связи: клиент, сервер и доверенный посредник между ними.
 Роль посредника здесь играет так называемый центр распределения ключей
 (
\emph on
Key Distribution Center
\emph default
, 
\emph on
KDC
\emph default
)
\emph on
.
\end_layout

\begin_layout Standard

\series bold
KDC
\series default
 представляет собой службу, работающую на физически защищенном сервере.
 Она ведет базу данных с информацией об учетных записях всех главных абонентов
 безопасности своей области.
 Вместе с информацией о каждом абоненте безопасности в базе данных KDC сохраняет
ся криптографический ключ, известный только этому абоненту и службе KDC.
 Этот ключ, который называют долговременным, используется для связи пользователя
 системы безопасности с центром распределения ключей.
 В большинстве практических реализаций протокола Kerberos долговременные
 ключи генерируются на основе пароля пользователя, указываемого при входе
 в систему.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/KDC.png
	scale 65

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Взаимодействие-клиента-и"

\end_inset

Взаимодействие клиента и сервера через посредника
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
На 
\emph on
рис.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Взаимодействие-клиента-и"

\end_inset

 
\emph default
изображен процесс взаимодействия клиента и сервера с посредником.
 
\end_layout

\begin_layout Enumerate
Клиент сообщает KDC об необходимости подключения к серверу.
\end_layout

\begin_layout Enumerate
KDC направляет клиенту и серверу копии уникального сеансового ключа (
\emph on
session key
\emph default
), действующие в течение короткого времени.
 Их назначение заключается в проведении аутентификации клиента и сервера.
 Копия сеансового ключа, пересылаемая на сервер, шифруется с помощью долговремен
ного ключа этого сервера, а направляемая клиенту --- долговременного ключа
 данного клиента.
\end_layout

\begin_layout Enumerate
Клиент и сервер обмениваются ключами и устанавливают соединение.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Однако и у данной модели взаимодействия существуют проблемы:
\end_layout

\begin_layout Itemize
Серверу приходится хранить свою копию сеансового ключа в памяти до тех пор,
 пока клиент не свяжется с ним.
\end_layout

\begin_layout Itemize
Возможные перебои в соединении между клиентом и сервером приведут к тому,
 что запросы на сервер поступят раньше, чем сервер получит ключ от KDC.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsubsection
Сеансовые мандаты.
\end_layout

\begin_layout Standard
В ответ на запрос клиента, который намерен подключиться к серверу, служба
 KDC направляет обе копии сеансового ключа клиенту.
 Сообщение, предназначенное клиенту, шифруется посредством долговременного
 ключа, общего для данного клиента и KDC, а сеансовый ключ для сервера вместе
 с информацией о клиенте вкладывается в блок данных, получивший название
 сеансового мандата (
\emph on
session ticket
\emph default
).
 Затем сеансовый мандат целиком шифруется с помощью долговременного ключа,
 который знают только служба KDC и данный сервер.
 После этого вся ответственность за обработку мандата, несущего в себе шифрованн
ый сеансовый ключ, возлагается на клиента, который должен доставить его
 на сервер.
 На 
\emph on
рис.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Работа-KDC-в"

\end_inset

 
\emph default
приведена схема работы KDC в режиме раздачи сеансовых мандатов.
 
\end_layout

\begin_layout Standard
В данном случае функции службы KDC ограничиваются генерацией мандата.
 Ей больше не нужно следить за тем, все ли отправленные сообщения доставлены
 соответствующим адресатам.
 Даже если какое-нибудь из них попадет не туда, --- ничего страшного не
 случится.
 Расшифровать клиентскую копию сеансового ключа может только тот, кто знает
 секретный долговременный ключ данного клиента, а чтобы прочесть содержимое
 сеансового мандата, нужен секретный ключ сервера.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/session_ticket.png
	scale 65

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Работа-KDC-в"

\end_inset

Работа KDC в режиме раздачи сеансовых мандатов
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Соединение клиента с сервером происходит по следующему сценарию:
\end_layout

\begin_layout Enumerate
Клиент направляет KDC уведомление о необходимости подключения к серверу.
\end_layout

\begin_layout Enumerate
KDC генерирует мандат, после чего пересылает клиенту мандат, зашифрованный
 долгосрочным ключем, и собственный аутентификатор, зашифрованный сеансовым
 ключом KDC.
\end_layout

\begin_layout Enumerate
Мандат и аутентификатор пересылается серверу.
 Сервер убеждается в том, что мандат и аутентификатор выдан доверенным посредник
ом KDC.
 Данные мандата расшифровываются ключом сервера.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Преимуществами данного подхода являются:
\end_layout

\begin_layout Itemize
Серверу не нужно хранить сеансовые ключи для связи с клиентами.
 Они сохраняются в кэш-памяти удостоверений (
\emph on
credentials cache
\emph default
) клиента, который направляет мандат на сервер каждый раз, когда хочет связаться
 с ним.
 Сервер, со своей стороны, получив от клиента мандат, дешифрует его и извлекает
 сеансовый ключ.
 Когда надобность в этом ключе исчезает, сервер может просто стереть его
 из своей памяти.
\end_layout

\begin_layout Itemize
У клиента исчезает необходимость обращаться к центру KDC перед каждым сеансом
 связи с конкретным сервером.
 Сеансовые мандаты можно использовать многократно.
 На случай же их хищения устанавливается срок годности мандата, который
 KDC указывает в самой структуре данных.
 Это время определяется политикой Kerberos для конкретной области.
 Обычно срок годности мандатов не превышает восьми часов, то есть, стандартной
 продолжительности одного сеанса работы в сети.
 Когда пользователь отключается от нее, кэш-память удостоверений обнуляется
 и все сеансовые мандаты вместе с сеансовыми ключами уничтожаются.
 Мандаты на выдачу мандатов.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Такой процесс --- вычисление одной копии ключа по паролю и извлечение другой
 его копии из базы данных --- выполняется всего лишь один раз за сеанс,
 когда пользователь входит в сеть впервые.
 Сразу же после получения пользовательского пароля и вычисления долговременного
 ключа клиент Kerberos рабочей станции запрашивает сеансовый мандат и сеансовый
 ключ, которые используются во всех последующих транзакциях с KDC на протяжении
 текущего сеанса работы в сети.
\end_layout

\begin_layout Standard
На запрос пользователя KDC отвечает специальным сеансовым мандатом для самого
 себя, так называемый мандат на выдачу мандатов (
\emph on
ticket-granting ticket
\emph default
), или мандат TGT.
 Как и обычный сеансовый мандат, мандат TGT содержит копию сеансового ключа
 для связи службы (в данном случае --- центра KDC) с клиентом.
 В сообщение с мандатом TGT также включается копия сеансового ключа, с помощью
 которой клиент может связаться с KDC.
 Мандат TGT шифруется посредством долговременного ключа службы KDC, а клиентская
 копия сеансового ключа --- с помощью долговременного ключа пользователя.
\end_layout

\begin_layout Standard
Получив ответ службы KDC на свой первоначальный запрос, клиент дешифрует
 свою копию сеансового ключа, используя для этого копию долговременного
 ключа пользователя из своей кэш-памяти.
 После этого долговременный ключ, полученный из пользовательского пароля,
 можно удалить из памяти, поскольку он больше не понадобится: вся последующая
 связь с KDC будет шифроваться с помощью полученного сеансового ключа.
 Как и все другие сеансовые ключи, он имеет временный характер и действителен
 до истечения срока действия мандата TGT, либо до выхода пользователя из
 системы.
 По этой причине такой ключ называют сеансовым ключом регистрации (
\emph on
login session key
\emph default
).
\end_layout

\begin_layout Standard
С точки зрения клиента мандат TGT почти ничем не отличается от обычного.
 Перед подключением к любой службе, клиент прежде всего обращается в кэш-память
 удостоверений и достает оттуда сеансовый мандат нужной службы.
 Если его нет, он начинает искать в этой же кэш-памяти мандат TGT.
 Найдя его, клиент извлекает оттуда же соответствующий сеансовый ключ регистраци
и и готовит с его помощью аутентификатор, который вместе с мандатом TGT
 высылает в центр KDC.
 Одновременно туда направляется запрос на сеансовый мандат для требуемой
 службы.
 Другими словами, организация безопасного доступа к KDC ничем не отличается
 от организации такого доступа к любой другой службе домена --- она требует
 сеансового ключа, аутентификатора и мандата (в данном случае мандата TGT).
\end_layout

\begin_layout Standard
С точки же зрения службы KDC, мандаты TGT позволяют ускорить обработку запросов
 на получением мандатов, сэкономив несколько наносекунд на пересылке каждого
 из них.
 Центр распределения ключей KDC обращается к долговременному ключу пользователя
 только один раз, когда предоставляет клиенту первоначальный мандат на выдачу
 мандата.
 Во всех последующих транзакциях с этим клиентом центр KDC дешифрует мандаты
 TGT с помощью собственного долговременного ключа и извлекает из него сеансовый
 ключ регистрации, который использует для проверки подлинности аутентификатора
 клиента.
 
\end_layout

\begin_layout Subsubsection
Достоинства и недостатки Kerberos
\end_layout

\begin_layout Standard
Достоинствами Kerberos являются:
\end_layout

\begin_layout Itemize
Монолитная система безопасности.
\end_layout

\begin_layout Standard
В качестве недостатков Kerberos можно перечислить:
\end_layout

\begin_layout Itemize
Централизованное хранение всех секретных ключей системы.
 
\begin_inset Newline newline
\end_inset

Успешная атака на Kerberos-сервер, в котором сосредоточена вся информация,
 критическая для системы безопасности, приводит к крушению информационной
 защиты всей сети.
 Альтернативным решением могла бы быть система, построенная на использовании
 алгоритмов шифрования с парными ключами, для которых характерно распределенное
 хранение секретных ключей.
 Однако в настоящий момент еще не появились коммерческие продукты, построенные
 на базе несимметричных методов шифрования, которые бы обеспечивали комплексную
 защиту больших сетей.
\end_layout

\begin_layout Itemize
Необходимость масштабируемости KDC.
 
\end_layout

\begin_layout Itemize
Секретный ключ временно хранится на рабочей станции пользователя, что может
 привести к его компрометации.
\end_layout

\begin_layout Itemize
Сеансовый ключ хранится на рабочей станции пользователя в открытом виде
 в кэше или таблице ключей, что может привести к его компрометации.
\end_layout

\begin_layout Itemize
Kerberos уязвим к подбору паролей, он не сможет узнать, что атакующим производит
ся подбор пароля по словарю.
 
\end_layout

\begin_layout Itemize
Kerberos не защищает сетевой трафик, если не включено шифрование.
 
\end_layout

\begin_layout Itemize
Если ключ очень короткий, он может быть уязвим к атаке «грубой силы» (
\emph on
brute force attack
\emph default
).
\end_layout

\begin_layout Itemize
Kerberos требует, чтобы системные часы на всех клиентах и серверах были
 синхронизированы.
 
\end_layout

\begin_layout Itemize
Для информационной защиты приложения необходимо, чтобы приложение реализовало
 Kerberos-API.
 
\end_layout

\begin_layout Itemize
Kerberos не поддерживается в нативном виде в PostgreSQL.
 На замену пришла система GSSAPI-Kerberos.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Метод авторизации Kerberos при использовании с PostgreSQL требует дополнительног
о сервера, содержащий компоненты системы Kerberos, для осуществления авторизации
 пользователя базы данных.
 Кроме того, при возрастании нагрузки на сервер базы данных потребуется
 масштабировать не только сервер базы данных, но и сервер Kerberos.
 Ввиду того, что секретные ключи хранятся на сервере Kerberos, требуется
 обеспечить дополнительную его безопасность от взлома.
 
\end_layout

\begin_layout Standard
Данные проблемы говорят о нежелательности использования Kerberos в качестве
 метода авторизации в PostgreSQL.
\end_layout

\begin_layout Subsection
Ident
\end_layout

\begin_layout Standard
Протокол идентификации 
\series bold
Ident
\series default
 
\emph on
(Identification Protocol
\emph default
, 
\emph on
ident
\emph default
, 
\emph on
Ident Protocol
\emph default
) 
\begin_inset CommandInset citation
LatexCommand cite
key "Ident"

\end_inset

 обеспечивает способ идентификации пользователя для конкретного соединения
 TCP.
 Используя на входе номера пары соединенных между собой портов TCP, протокол
 возвращает строку символов, идентифицирующую владельца данного соединения
 на стороне сервера.
 Первоначально протокол идентификации называли Authentication Server Protocol
 (протокол аутентификации сервера).
 Новое имя лучше отражает суть протокола.
 
\end_layout

\begin_layout Subsubsection
Принцип работы 
\end_layout

\begin_layout Standard
Протокол представляет собой сервис на основе соединений TCP.
 Сервер слушает соединения TCP для порта 113.
 После организации соединения сервер читает строку данных, содержащую сведения
 о цели соединения.
 При существовании идентификатора пользователя для соединения сервер передает
 этот идентификатор в качестве отклика.
 После этого сервер может закрыть соединение или продолжить диалог «запрос-откли
к».
 Серверу следует закрывать соединение по истечении заданного конфигурационными
 параметрами тайм-аута (60-180) при отсутствии каких-либо запросов.
 Клиент может закрыть соединение в любой момент, однако для компенсации
 возможных задержек в сети клиенту следует выждать по крайней мере 30 секунд
 после запроса прежде, закрыть соединение.
 
\end_layout

\begin_layout Standard
Передача запросов допустима только для полностью организованных соединений.
 Запрос содержит номера пары портов (локальный - удаленный), используемых
 для идентификации соединения и получаемых с указанием локального и удаленного
 адресов.
 Это означает, что пользователь с адресом A может запрашивать у сервера
 B только информацию о соединении между A и B.
\end_layout

\begin_layout Standard
Сервер воспринимает простые текстовые запросы в формате: 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

<port-on-server>, <port-on-client> 
\end_layout

\end_inset

где 
\family typewriter
<port-on-server>
\family default
 указывает порт TCP для адресата (хоста, где работает сервер ident), а
\family typewriter
 <port-on-client>
\family default
 указывает порт TCP (десятичное значение) на клиентской системе.
 
\end_layout

\begin_layout Standard
Важно отметить, что если клиент на хосте A хочет сделать запрос серверу
 на хосте B о соединении, заданном локально (на хосте A) парой портов 
\family typewriter
23, 6191
\family default
 (входящее соединение TELNET), клиент должен сделать запрос для пары 6191,
 23 (идентификация соединения с точки зрения хоста B).
 Например: 
\family typewriter
6191, 23
\family default
.
\end_layout

\begin_layout Standard
Отклик имеет формат: 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

<port-on-server>, <port-on-client> : <resp-type> : <add-info>
\end_layout

\end_inset

 где 
\family typewriter
<port-on-server> 
\family default
и 
\family typewriter
<port-on-client> 
\family default
совпадают с номерами портов в запросе, 
\family typewriter
<resp-type> 
\family default
идентифицирует тип отклика, а 
\family typewriter
<add-info> 
\family default
содержит зависящие от контекста данные.
\end_layout

\begin_layout Standard
Возвращаемая информация связана с соединением TCP, заданным параметрами
 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

<server-address>, <client-address>, <port-on-server>, <port-on-client> 
\end_layout

\end_inset

где
\family typewriter
 <server-address> 
\family default
и 
\family typewriter
<client-address> 
\family default
- IP-адреса обеих сторон соединения, а 
\family typewriter
<port-on-server>
\family default
 и 
\family typewriter
<port-on-client>
\family default
 --- параметры запроса.
 Например: 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

6193, 23 : USERID : UNIX : stjohns 6195, 23 : ERROR : NO-USER
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Типы откликов 
\end_layout

\begin_layout Standard
Отклики могут быть двух типов: 
\family typewriter
USERID
\family default
 и 
\family typewriter
ERROR
\family default
.
 В случае отклика 
\family typewriter
USERID
\family default
 строка
\family typewriter
 <add-info>
\family default
 содержит название операционной системы, за которым следует разделитель
 "
\family typewriter
:
\family default
" и строка идентификации.
 Если отклик содержит набор символов, последний отделяется от имени операционной
 системы запятой (,).
 Для обозначения набора символов используются стандартные идентификаторы.
 Если набор символов не указан, предполагается US-ASCII.
 
\end_layout

\begin_layout Standard
В противном случае возвращается тип отклика 
\family typewriter
ERROR
\family default
.
 Если по каким-то причинам владелец соединения не может быть определен,
 строка 
\family typewriter
<add-info>
\family default
 сообщает о причине.
 Возможны следующие значения
\family typewriter
 <add-info>
\family default
: 
\end_layout

\begin_layout Itemize

\family typewriter
INVALID-PORT
\family default
 --- Один из портов указан некорректно.
 Такой отклик возвращается, если номер какого-нибудь (или обоих) из портов
 выходит за допустимые пределы (порты TCP могут нумероваться от 1 до 65535)
 или не является целым числом.
 NO-USER Указанное парой портов соединение в настоящее время не используется
 или принадлежит неизвестному объекту.
 
\end_layout

\begin_layout Itemize

\family typewriter
HIDDEN-USER
\family default
 --- Сервер может определить пользователя, но не сообщает о нем по требованию
 этого пользователя.
 
\end_layout

\begin_layout Itemize

\family typewriter
UNKNOWN-ERROR
\family default
 --- Причину ошибки не удается определить (любая причина, не указанная выше).
 Такой отклик может возвращаться и в тех случаях, когда сервер может определить
 причину ошибки, но не желает ее сообщать.
 Если на сервере реализована такая возможность, она должна быть настраиваемой
 и по умолчанию сервер должен возвращать корректное сообщение об ошибке.
 В дальнейшем могут быть добавлены другие коды отклики.
 При использовании нестандартных откликов они должны начинаться с символа
 "X".
 В дополнение к возврату откликов сервер может разрывать соединения, не
 возвращая никакого отклика.
 Преждевременное завершение соединения (клиент не получил символа EOL) должно
 трактоваться клиентом как отклик "ERROR : UNKNOWN-ERROR".
 
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsubsection
Достоинства и недостатки Ident
\end_layout

\begin_layout Standard
Достоинствами протокола Ident являются:
\end_layout

\begin_layout Enumerate
Может быть использован в архитектуре клиент-сервер.
\end_layout

\begin_layout Enumerate
Простота архитектуры и сообщений передачи данных протокола.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Недостатками протокола являются:
\end_layout

\begin_layout Enumerate
Возможность подмены хоста и/или информации на хосте.
\end_layout

\begin_layout Enumerate
Не предназначен для авторизации или контроля доступа.
\end_layout

\begin_layout Enumerate
Некоторые сервера, реализующие протокол Ident, возвращают зашифрованное
 имя пользователя.
 В PostgreSQL нет возможностей расшифровки имен, поэтому имена пользователей
 по протоколу Ident передаются в открытом виде.
\end_layout

\begin_layout Enumerate
Авторизация пользователя в PostgreSQL проводится при сравнении имен пользователя
 ОС и пользователя базы данных.
 
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Протокол Ident не может быть использован в качестве основного метода авторизации
 в PostgreSQL ввиду возможности подмены хоста и/или пользователя.
\end_layout

\begin_layout Subsection
Peer
\end_layout

\begin_layout Standard
Метод 
\series bold
Peer
\series default
 авторизации 
\begin_inset CommandInset citation
LatexCommand cite
key "Peer"

\end_inset

 в PostgreSQL работает следующим образом: PostgreSQL берет имя пользователя
 операционной системы и сопоставляет его с названием базы данных.
 Если сопоставление имен успешно, пользователю предоставляются права на
 доступ к базе данных.
\end_layout

\begin_layout Standard
Достоинствами метода Peer являются:
\end_layout

\begin_layout Enumerate
Простота реализации протокола.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Недостатками метода Peer являются:
\end_layout

\begin_layout Enumerate
Применим только для локальных подключений.
\end_layout

\begin_layout Enumerate
Может быть использован только в операционных системах, в которых существует
 функция получения текущего значения peer.
\end_layout

\begin_layout Enumerate
Незашифрованный канал.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Метод авторизации Peer может быть применим только для локальных соединений.
 Передача данных по данному протоколу осуществляется по незашифрованному
 каналу.
 Для обеспечения безопасности пользователей баз данных требуется устанавливать
 сложные пароли от своих аккаунтов в операционной системе.
\end_layout

\begin_layout Subsection
PAM
\end_layout

\begin_layout Standard

\series bold
Pluggable Authentication Modules
\series default
 (
\series bold
PAM
\series default
, подключаемые модули аутентификации) 
\begin_inset CommandInset citation
LatexCommand cite
key "PAM"

\end_inset

 --- это набор разделяемых библиотек, которые позволяют интегрировать различные
 низкоуровневые методы аутентификации в виде единого высокоуровневого API.
 
\end_layout

\begin_layout Subsubsection
Архитектура PAM
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/pam.png
	scale 65

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Схема-работы-PAM"

\end_inset

Схема работы PAM с приложением
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Программы, которые используют данные паролей, не работают с этими данными
 напрямую, а делают запрос в службу PAM.
 PAM проводит процедуру аутентификации и возвращает результат: 
\family typewriter
PAM_SUCCESS
\family default
 (доступ открыт) или 
\family typewriter
PAM_AUTH_ERR
\family default
 (доступ закрыт).
 Таким образом, приложению не важно, каким образом PAM осуществляет аутентификац
ию.
 
\end_layout

\begin_layout Standard
PAM состоит из:
\end_layout

\begin_layout Itemize
Динамических библиотек --- модулей, с помощью которых проводятся процедура
 авторизации пользователя.
 
\end_layout

\begin_layout Itemize
Конфигурационных файлов PAM, описывающие порядок использования модулей при
 авторизации.
 
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Модули PAM в свою очередь, делятся на 4 типа:
\end_layout

\begin_layout Enumerate

\family typewriter
auth
\family default
.
 Это модули, которые выполняют функции аутентификации пользователей в системе
 (проверяют наличие пользователей в системе, сверяют имя и введенный пароль,
 проверяют права пользователя и разрешают доступ в ту или иную группу).
\end_layout

\begin_layout Enumerate

\family typewriter
account
\family default
.
 Проверяют доступность аккаунта на основе ресурсов системы (время суток
 или загрузка сервера).
\end_layout

\begin_layout Enumerate

\family typewriter
password
\family default
.
 Этот тип модулей осуществляет смену пароля по истечению срока действия.
 
\end_layout

\begin_layout Enumerate

\family typewriter
session
\family default
.
 Используются для выполнения определенных действий до начала или перед окончание
м сеанса.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Принцип работы PAM следующий: приложение, которому требуется авторизация,
 делает запрос в службу PAM.
 Служба PAM ищет конфигурационный файл, описывающий процесс авторизации
 этого приложения, после чего выдает ответ, предоставить приложению права
 или нет.
 Схема работы метода авторизации PAM приведен на 
\emph on
рисунке 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Схема-работы-PAM"

\end_inset


\emph default
.
\end_layout

\begin_layout Standard
Процесс авторизации пользователей в какой-либо программе описывается в конфигура
ционном файле этой программы в каталоге 
\family typewriter
/etc/pam.d/
\family default
 и представляет собой следующее:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

<тип_модуля_1> <Флаг_контроля_1> <Путь_к_модулю_1> <Параметры_модуля_1>
\end_layout

\begin_layout Plain Layout

...
\end_layout

\begin_layout Plain Layout

<тип_модуля_N> <Флаг_контроля_N> <Путь_к_модулю_N> <Параметры_модуля_N>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
В первом столбце указывается один из возможных типов модулей: 
\family typewriter
auth
\family default
, 
\family typewriter
account
\family default
, 
\family typewriter
password 
\family default
или 
\family typewriter
session
\family default
.
\end_layout

\begin_layout Standard
Во втором --- флаг контроля.
 Он указывает, как реагировать системе при успешном или неудачном прохождении
 модуля.
 Он предусматривает одно из нескольких значений:
\end_layout

\begin_layout Itemize

\family typewriter
required
\family default
 --- Авторизация в этом модуле необходима для авторизации в целом.
 В случае провала авторизации в этом модуле будут выполняться оставшиеся
 модули.
\end_layout

\begin_layout Itemize

\family typewriter
requisite
\family default
 --- Авторизация в этом модуле также необходима для авторизации в целом,
 но в случае провала авторизации в этом модуле, управление будет возвращено
 приложению.
\end_layout

\begin_layout Itemize

\family typewriter
sufficient 
\family default
--- Успешная авторизация в этом модуле считается достаточном для признания
 всей аутентификации в целом, если не провалилась проверка на предшествующих
 модулях с флагом 
\family typewriter
required
\family default
.
 Провал авторизации в этом модуле не считается фатальной для всей последующей
 аутентификации.
\end_layout

\begin_layout Itemize

\family typewriter
optional
\family default
 --- Этот модуль не критичен для аутентификации и используется как дополнительны
й.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
В следующем столбце указывается путь к 
\family typewriter
so
\family default
-библиотеке модуля.
\end_layout

\begin_layout Standard
В последнем столбце указываются некоторые параметры модуля.
 
\end_layout

\begin_layout Standard
В следующем листинге приведен конфигурационный файл 
\family typewriter
/etc/pam.d/login
\family default
 программы 
\family typewriter
login
\family default
:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

#%PAM-1.0
\end_layout

\begin_layout Plain Layout

account    required     pam_nologin.so
\end_layout

\begin_layout Plain Layout

# pam_selinux.so close should be the first session rule
\end_layout

\begin_layout Plain Layout

session    required     pam_selinux.so close
\end_layout

\begin_layout Plain Layout

session    required     pam_loginuid.so
\end_layout

\begin_layout Plain Layout

session    optional     pam_console.so
\end_layout

\begin_layout Plain Layout

# pam_selinux.so open should only be followed by sessions to be executed
 in the user context
\end_layout

\begin_layout Plain Layout

session    required     pam_selinux.so open
\end_layout

\begin_layout Plain Layout

session    required     pam_namespace.so
\end_layout

\begin_layout Plain Layout

session    optional     pam_keyinit.so force revoke
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Обязательными модулями здесь являются: 
\family typewriter
pam_nologin
\family default
, 
\family typewriter
pam_selinux
\family default
, 
\family typewriter
pam_loginuid
\family default
, 
\family typewriter
pam_selinux
\family default
, 
\family typewriter
pam_namespace
\family default
.
 Выполнение авторизации в этих модулях гарантируют авторизацию в целом.
 
\end_layout

\begin_layout Subsubsection
Достоинства и недостатки метода авторизации PAM
\end_layout

\begin_layout Standard
В качестве достоинств методов авторизации PAM можно выделить:
\end_layout

\begin_layout Enumerate
Простота реализации.
\end_layout

\begin_layout Enumerate
Расширяемость.
\end_layout

\begin_layout Enumerate
Поддерживает клиент-серверную архитектуру.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
В качестве недостатков PAM выделяются:
\end_layout

\begin_layout Enumerate
Возможность подмены модуля авторизации.
\end_layout

\begin_layout Enumerate
Необходима тонкая настройка авторизации для использования в PostgreSQL.
\end_layout

\begin_layout Enumerate
Может быть использован только для проверки пароля.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Ввиду возможности подмены модуля PAM требуется дополнительная защита сервера,
 авторизовывающий пользователей баз данных.
 Использование данного метода авторизации ограничено проверкой пароля пользовате
ля, поэтому использовать его для сетевой авторизации пользователей нежелательно.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section
Метод авторизации LDAP
\end_layout

\begin_layout Subsection
Обзор протокола LDAP
\end_layout

\begin_layout Standard

\series bold
LDAP
\series default
 - это аббревиатура от
\emph on
 Lightweight Directory Access Protocol
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "LDAP"

\end_inset

.
 Как следует из названия, это облегченный протокол доступа к службам каталогов,
 предназначенный для доступа к службам каталогов на основе X.500.
 LDAP работает поверх TCP/IP или других ориентированных на соединение сетевых
 протоколов.
 LDAP стандартизирован в качестве протокола IETF.
 Он описан в стандарте 
\series bold
RFC4510
\series default
.
\end_layout

\begin_layout Standard
Каталоги LDAP используют модель данных, которая считает или представляет
 данные как иерархию объектов.
 Это не означает, что LDAP является объектно-ориентированной базой данных.
\end_layout

\begin_layout Standard
В LDAP-каталоге данные представлены как иерархия объектов, каждый из которых
 называется записью.
 Полученная в результате древовидная структура называется 
\series bold
информационным деревом каталога 
\series default
(
\emph on
Data Information Tree
\emph default
, 
\emph on
DIT
\emph default
).
 Верхнюю часть данного дерева обычно называют 
\series bold
корнем 
\series default
(
\series bold
root
\series default
), (а также базой (
\series bold
base
\series default
) или суффиксом (
\series bold
suffix
\series default
)).
\end_layout

\begin_layout Standard
Каждый элемент DIT называется записью (
\series bold
object
\series default
).
 Каждая запись имеет ноль или более дочерних записей.
 Каждая дочерняя запись является одноуровневой (братской) по отношению к
 другим дочерним записям своей родительской записи.
 Каждая запись является экземпляром одного или нескольких объектных классов
 (
\series bold
objectClass
\series default
).
\end_layout

\begin_layout Standard
Объектные классы содержат ноль или более атрибутов (
\series bold
attribute
\series default
).
 Атрибуты имеют имена (и, иногда, аббревиатуры или псевдонимы) и обычно
 содержат данные.
\end_layout

\begin_layout Standard
Характеристики (свойства) объектных классов и их атрибутов описываются определен
иями 
\series bold
ASN.1
\series default
.
\series bold
100
\series default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/DIT.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Дерево-информационного-каталога"

\end_inset

Дерево информационного каталога LDAP
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
На 
\emph on
рис.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Дерево-информационного-каталога"

\end_inset

 
\emph default
представлен пример дерева информационного каталога LDAP.
 Элемент 
\family typewriter
root 
\family default
является корневым
\family typewriter
 
\family default
для данного дерева, а также является родителем для элементов 
\family typewriter
note_1
\family default
, 
\family typewriter
note_2
\family default
, 
\family typewriter
note_3
\family default
.
 Элементы 
\family typewriter
note_1
\family default
, 
\family typewriter
note_2
\family default
 и 
\family typewriter
note_3
\family default
 являются братскими между собой.
 Элементы 
\family typewriter
child_1 
\family default
и 
\family typewriter
child_2
\family default
 --- дочерними для 
\family typewriter
note_1
\family default
.
\end_layout

\begin_layout Subsubsection*
Атрибуты
\end_layout

\begin_layout Standard
Каждый атрибут имеет имя и обычно содержит данные.
 Атрибуты всегда связаны являются членами одного или нескольких классов.
 У атрибутов есть ряд интересных особенностей:
\end_layout

\begin_layout Enumerate
Каждый атрибут определяет тип данных, которые он может содержать.
\end_layout

\begin_layout Enumerate
Атрибуты могут быть необязательными (MAY) или обязательными (MUST).
\end_layout

\begin_layout Enumerate
Атрибуты могут быть единственными (
\family typewriter
single
\family default
) или множественными (
\family typewriter
multi
\family default
).
 
\family typewriter
Single
\family default
 означает, что для атрибута может быть задано только одно значение.
 
\family typewriter
Multi
\family default
 --- для атрибута может быть задано несколько значений.
 
\end_layout

\begin_layout Enumerate
Атрибуты могут иметь псевдонимы (
\family typewriter
alias
\family default
) имен.
 При этом при ссылке на этот атрибут можно использовать как полное имя атрибута,
 так и его псевдоним.
\end_layout

\begin_layout Enumerate
На всех уровнях иерархии атрибуты должны быть уникальными.
 
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
Каждый атрибут описывается в классе по следующей схеме:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

AttributeTypeDescription = "(" whsp 	;whsp - пробел
\end_layout

\begin_layout Plain Layout

   numericoid whsp     			
\end_layout

\begin_layout Plain Layout

 [ "NAME" qdescrs ]             	
\end_layout

\begin_layout Plain Layout

 [ "DESC" qdstring ]            	
\end_layout

\begin_layout Plain Layout

 [ "OBSOLETE" whsp ]
\end_layout

\begin_layout Plain Layout

 [ "SUP" woid ]                 	
\end_layout

\begin_layout Plain Layout

 [ "EQUALITY" woid              	
\end_layout

\begin_layout Plain Layout

 [ "ORDERING" woid              	
\end_layout

\begin_layout Plain Layout

 [ "SUBSTR" woid ]              	
\end_layout

\begin_layout Plain Layout

 [ "SYNTAX" whsp noidlen whsp ] 	
\end_layout

\begin_layout Plain Layout

 [ "SINGLE-VALUE" whsp ]        	
\end_layout

\begin_layout Plain Layout

 [ "COLLECTIVE" whsp ]          	
\end_layout

\begin_layout Plain Layout

 [ "NO-USER-MODIFICATION" whsp ]	
\end_layout

\begin_layout Plain Layout

 [ X-ORDERED whsp type ]        	
\end_layout

\begin_layout Plain Layout

 [ "USAGE" whsp AttributeUsage ]	
\end_layout

\begin_layout Plain Layout

 whsp ")"
\end_layout

\end_inset

Далее приводится описание наиболее важных элементов атрибута:
\end_layout

\begin_layout Itemize

\family typewriter
numbercoid
\family default
 определяет OID атрибута.
 Этот OID должен быть уникальным.
 
\end_layout

\begin_layout Itemize

\family typewriter
NAME
\family default
 определяет глобально уникальное имя для данного атрибута.
\end_layout

\begin_layout Itemize

\family typewriter
DESC 
\family default
задает описание атрибута.
\end_layout

\begin_layout Itemize

\family typewriter
SUP
\family default
 указывает класс-родитель (если есть).
\end_layout

\begin_layout Itemize

\family typewriter
EQUALITY
\family default
 определяет поведение атрибута в поисковом фильтре, где не используется
 поисковых шаблонов.
 
\end_layout

\begin_layout Itemize

\family typewriter
SUBSTR 
\family default
определяет поведение атрибута в поисковом фильтре, использующем подстроки,
 содержащем один или несколько поисковых шаблонов.
 
\end_layout

\begin_layout Itemize

\family typewriter
SYNTAX
\family default
 это OID, определяющий тип данных, а также какие правила (проверки данных)
 применяются к этим данным.
 
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
На листинге приведен пример определения атрибута 
\family typewriter
name
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

attributetype ( 2.5.4.41 NAME 'name'
\end_layout

\begin_layout Plain Layout

  EQUALITY caseIgnoreMatch
\end_layout

\begin_layout Plain Layout

  SUBSTR caseIgnoreSubstringsMatch
\end_layout

\begin_layout Plain Layout

  SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{32768} )
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
Объектные классы
\end_layout

\begin_layout Standard
Объектные классы представляют собой хранилищем атрибутов, определяют перечень
 атрибутов, которые должны присутствовать в случае загрузки записи в LDAP,
 а также перечень необязательных атрибутов.
 Объектный класс может быть унаследован от другого класса, при этом дочерний
 класс наследует все атрибуты класса-родителя.
\end_layout

\begin_layout Standard
Объектный класс описывается по следующей схеме:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

ObjectClassDescription = "(" whsp
\end_layout

\begin_layout Plain Layout

 numericoid whsp      
\end_layout

\begin_layout Plain Layout

 [ "NAME" qdescrs ]
\end_layout

\begin_layout Plain Layout

 [ "DESC" qdstring ]
\end_layout

\begin_layout Plain Layout

 [ "OBSOLETE" whsp ]
\end_layout

\begin_layout Plain Layout

 [ "SUP" oids ]       
\end_layout

\begin_layout Plain Layout

 [ ( "ABSTRACT" / "STRUCTURAL" / "AUXILIARY" ) whsp ]
\end_layout

\begin_layout Plain Layout

                      
\end_layout

\begin_layout Plain Layout

 [ "MUST" oids ]      
\end_layout

\begin_layout Plain Layout

 [ "MAY" oids ]       
\end_layout

\begin_layout Plain Layout

  whsp ")"
\end_layout

\end_inset


\end_layout

\begin_layout Itemize
Поле 
\family typewriter
numerricoid 
\family default
указывает идентификатор класса.
 
\end_layout

\begin_layout Itemize

\family typewriter
NAME 
\family default
определяет имя класса.
\end_layout

\begin_layout Itemize

\family typewriter
DESC 
\family default
задает описание класса.
\end_layout

\begin_layout Itemize

\family typewriter
SUP
\family default
 указывает класс-родитель данного класса.
\end_layout

\begin_layout Itemize

\family typewriter
STRUCTURAL 
\family default
--- класс может формировать запись в дереве каталогов.
 
\family typewriter
ABSTRACT 
\family default
--- указывает на несуществующий класс в дереве каталогов, используемый для
 удобства.
 
\family typewriter
AUXILIARY
\family default
 определяет вспомогательный класс, который только используется при создании
 других объектных классов
\end_layout

\begin_layout Itemize

\family typewriter
MUST 
\family default
определяет перечень атрибутов, которые обязательно должны содержаться в
 классе.
\end_layout

\begin_layout Itemize

\family typewriter
MAY 
\family default
определяет перечень необязательных атрибутов класса.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
В качестве примера далее приведено описание класса 
\family typewriter
pilotOrganization 
\family default
с
\family typewriter
 
\family default
необязательным атрибутом 
\family typewriter
buildingName
\family default
 и со всеми атрибутами (необязательными и обязательными) объектных классов
 
\family typewriter
organization
\family default
 и
\family typewriter
 organizationUnit
\family default
:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

objectClasses: ( 0.9.2342.19200300.100.4.20 NAME 'pilotOrganization'
\end_layout

\begin_layout Plain Layout

  SUP ( organization $ organizationalUnit ) STRUCTURAL
\end_layout

\begin_layout Plain Layout

  MAY buildingName )
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
OpenLDAP
\end_layout

\begin_layout Standard
OpenLDAP --- открытая реализация протокола LDAP.
\end_layout

\begin_layout Standard

\family typewriter
slapd 
\family default
--- сервер службы каталогов, реализующую 3ю версию протокола LDAP.
 В качестве хранилища поддерживаются механизмы манипуляции данных.
 Одним из самых распространенных является BDB (высокопроизводительный механизм
 манипуляции с поддержкой транзакций) на базе Berklery DB.
 Сервер 
\family typewriter
slapd
\family default
 может быть настроен в режиме 
\family typewriter
master-slave
\family default
, в котором данные ведущего сервера пересылаются в фоновом режиме на ведомый.
 
\end_layout

\begin_layout Subsubsection
Использование OLC в OpenLDAP
\end_layout

\begin_layout Standard
Исторически OpenLDAP настраивался статически, то есть, чтобы произвести
 изменение, нужно было править конфигурационный файл 
\family typewriter
slapd.conf
\family default
, а затем останавливать и запускать 
\family typewriter
slapd
\family default
.
 При увеличении количества записей в каталоге перезапуск будет занимать
 все более продолжительное время, и, в случае высоконагруженных каталогов,
 такой метод переконфигурации становится всё более неприемлемым.
 В OpenLDAP версии 2.3 была представлена опциональная новая возможность,
 посредством которой конфигурация может быть произведена во время исполнения
 с помощью модификации записей специального DIT, называемого 
\family typewriter
cn=config
\family default
.
\end_layout

\begin_layout Standard
Для управления настройками рабочей среды в конфигурации времени исполнения
 (OLC) используется конфигурационное DIT с жёстко установленным суффиксом
 
\family typewriter
cn=config
\family default
.
 Концептуально, модификация записей в этом DIT (с помощью LDAP-браузера
 или файлов LDIF) приводит к немедленному изменению поведения рабочей среды
 
\family typewriter
slapd
\family default
 без необходимости перезапуска 
\family typewriter
slapd
\family default
 (как это приходилось делать после изменения 
\family typewriter
slapd.conf
\family default
).
 На 
\emph on
рисунке 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Схема-каталога-cn=config"

\end_inset


\emph default
 представлена структурная схема каталога 
\family typewriter
cn=config
\family default
.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/cn=config.png
	scale 60

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Схема-каталога-cn=config"

\end_inset

Структурная схема каталога 
\family typewriter
cn=config
\family default
 OpenLDAP
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Корневая запись 
\family typewriter
cn=config 
\family default
основывается на объектном классе 
\family typewriter
olcGlobal 
\family default
и содержит глобальные атрибуты, влияющие на работу 
\family typewriter
slapd
\family default
.
\end_layout

\begin_layout Standard
Запись 
\family typewriter
cn=module{0},cn=config
\family default
 основывается на объектном классе 
\family typewriter
olcModuleList 
\family default
и содержит список всех динамически загружаемых объектов и путей к ним.
 
\end_layout

\begin_layout Standard
Запись
\family typewriter
 cn=schema,cn=config
\family default
 использует объектный класс 
\family typewriter
olcSchemaConfig 
\family default
и содержит все объекты, используемые системой 
\family typewriter
cn=config
\family default
.
 
\end_layout

\begin_layout Standard
Дочерние записи cn
\family typewriter
={Z}xxx,cn=schema,cn=config
\family default
 используют объектный класс 
\family typewriter
olcSchemaConfig 
\family default
и содержат все объекты (атрибуты и объектные классы), определённые в данном
 наборе схемы.
 Здесь {Z} - числовой счётчик, нумерация которого начинается с 0, а xxxx
 - имя набора схемы данных.
 То есть, если первым подключается набор схемы 
\family typewriter
core.schema
\family default
, то данное значение будет 
\family typewriter
{0}core
\family default
.
 
\end_layout

\begin_layout Standard
Запись 
\family typewriter
olcDatabase={Z}xxx,cn=config
\family default
 использует объектный класс 
\family typewriter
olcDatabaseConfig
\family default
 (содержащий общие атрибуты, определяемые для всех типов баз данных), а
 также объектный класс, специфичный для конкретного типа базы данных.
 Здесь {Z} - числовой счётчик, нумерация которого начинается с 0, а xxxx
 - имя типа базы данных.
 То есть, если первой определяется база данных типа 
\family typewriter
bdb
\family default
, то данное значение будет 
\family typewriter
{0}bdb
\family default
, и эта запись будет строиться на объектном классе olcBdbConfig, содержащем
 атрибуты, специфичные для этого типа баз данных.
 
\end_layout

\begin_layout Standard
Запись 
\family typewriter
olcOverlay={Z}xxx,olcDatabase={Z}xxx,cn=config
\family default
 использует объектный класс 
\family typewriter
olcOverlayConfig
\family default
, содержащий общие атрибуты, определяемые для всех наложений, а также объектный
 класс, специфичный для конкретного наложения.
 Здесь {Z} - числовой счётчик, нумерация которого начинается с 0, а xxxx
 - имя наложения.
 То есть, если первым из наложений определяется наложение 
\family typewriter
syncprov
\family default
, то данное значение будет 
\family typewriter
{0}syncprov
\family default
, и эта запись будет строиться на объектном классе 
\family typewriter
olcSyncProvConfig
\family default
, содержащем атрибуты, специфичные для этого наложения.
 Точно также другие наложения будут использовать специфичные для них объектные
 классы, содержащие их уникальные атрибуты.
 
\end_layout

\begin_layout Subsubsection
Инструменты манипуляций данными в OpenLDAP
\end_layout

\begin_layout Standard
С пакетом 
\family typewriter
openldap-servers 
\family default

\begin_inset CommandInset citation
LatexCommand cite
key "LDAP-for-rocket-scientist"

\end_inset

 поставляются различные утилиты OpenLDAP, которые позволяют оперировать
 с данными каталога.
 
\end_layout

\begin_layout Standard
Утилита 
\family typewriter
\series bold
ldapadd 
\family default
\series default
(
\family typewriter
\series bold
ldapmodify
\family default
\series default
) позволяет добавить данные в каталог.
 Например запрос:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapadd -H ldapi:/// -x -D "cn=admin,dc=ldap-server,dc=ru" -f /tmp/addgroups.ld
if -w password
\end_layout

\end_inset

добавляет в каталог 
\family typewriter
cn=admin,dc=ldap-server,dc=ru 
\family default
содержимое файла 
\family typewriter
/tmp/addgroups.ldif 
\family default
локально с применением проверки подлинности по паролю (указан после ключа
 
\family typewriter
-w
\family default
).
\end_layout

\begin_layout Standard

\family typewriter
\series bold
ldapdelete
\family default
\series default
 открывает соединение с сервером LDAP, подключается и удаляет одну или несколько
 записей.
 Если команде был предоставлен один или несколько аргументов DN, записи
 с этими Distinguished Names будут удалены.
 Каждый DN должен быть оформлен в виде строкового представления LDAPv3,
 как определено в RFC 2253.
 
\end_layout

\begin_layout Standard

\family typewriter
\series bold
ldapmodrdn
\family default
\series default
 открывает соединение с сервером LDAP, подключается и модифицирует RDN записей.
\end_layout

\begin_layout Standard
Утилита 
\family typewriter
\series bold
ldappasswd 
\family default
\series default
позволяет проводить действия с паролями, в т.ч.
 генерировать зашифрованные пароли.
 Например запрос:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldappasswd -H ldapi:/// -D cn=admin,dc=ldap-server,dc=ru -W -A -S "cn=user1,ou
=Users,dc=ldap-server,dc=ru" 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
меняет пароль у пользователя 
\family typewriter
user1
\family default
 из группы 
\family typewriter
Users
\family default
.
 При этом запрашивается старый пароль, новый пароль, после чего новый пароль
 записывается в каталог.
 
\end_layout

\begin_layout Standard

\family typewriter
\series bold
ldapsearch
\family default
\series default
 открывает соединение с сервером LDAP, подключается и производит поиск,
 используя указанные параметры.
 Указываемый фильтр должен соответствовать строковому представлению поисковых
 фильтров, определённому в RFC 4515.
 Если фильтр не был указан, используется фильтр по умолчанию 
\family typewriter
(objectClass=*)
\family default
.
 Если 
\family typewriter
ldapsearch
\family default
 находит одну или несколько записей, возвращаются атрибуты, указанные как
 аргументы 
\family typewriter
attrs
\family default
.
 Если в списке атрибутов присутствует *, возвращаются все пользовательские
 атрибуты.
 Если присутствует +, возвращаются все операционные атрибуты.
 Если не было указано аргументов 
\family typewriter
attrs
\family default
, будут возвращены все пользовательские атрибуты (то есть подразумевается
 
\family typewriter
*
\family default
).
 Например запрос:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapsearch -x -LLL -b dc=ldap-server,dc=ru '(objectClass=inetOrgPerson)'
\end_layout

\end_inset

возвратит все записи класса 
\family typewriter
InetOrgPerson 
\family default
из каталога 
\family typewriter
dc=ldap-server,dc=ru
\family default
.
\end_layout

\begin_layout Standard

\family typewriter
\series bold
ldapwhoami 
\family default
\series default
открывает соединение и получает информацию о пользователе, который подключается
 к 
\family typewriter
slapd
\family default
.
 Пример:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapwhoami -x -D cn=postgres,ou=Admins,dc=ldap-server,dc=ru -w 123456
\end_layout

\end_inset

выведет строку:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

cn=postgres,ou=Admins,dc=ldap-server,dc=ru
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\family typewriter
\series bold
slapacl
\family default
\series default
 позволяет пользователю проверить возможность доступа от имени определённого
 DN подключения (
\family typewriter
-b
\family default
) к указанным атрибутам, применяя текущие директивы политик, указанные в
 конфигурационных файлах 
\family typewriter
slapd
\family default
 атрибутами 
\family typewriter
olcAccess
\family default
.
\end_layout

\begin_layout Standard
Например, запрос 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# slapacl -b cn=user1,ou=Users,dc=ldap-server,dc=ru -D cn=user1,ou=Users,dc=ldap
-server,dc=ru
\end_layout

\end_inset

Выдаст информацию, какие права имеет пользователь 
\family typewriter
cn=user1,ou=Users,dc=ldap-server,dc=ru
\family default
 (указывается с помощью ключа 
\family typewriter
-D
\family default
) к своей записи (указана с помощью ключа 
\family typewriter
-b
\family default
):
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

authcDN: "cn=user1,ou=users,dc=ldap-server,dc=ru"
\end_layout

\begin_layout Plain Layout

entry: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

children: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

cn=user1: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

sn=seuser: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

objectClass=seInetOrgPerson: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

userPassword=****: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

selinuxContext=user_u:user_r:user_t:s0-s3: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

uid=501: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

structuralObjectClass=seInetOrgPerson: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

entryUUID=e5543424-df1a-1032-970f-83b11b1d9dcb: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

creatorsName=cn=admin,dc=ldap-server,dc=ru: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

createTimestamp=20131111124532Z: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

entryCSN=20131111124532.017725Z#000000#000#000000: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

modifiersName=cn=admin,dc=ldap-server,dc=ru: write(=wrscxd)
\end_layout

\begin_layout Plain Layout

modifyTimestamp=20131111124532Z: write(=wrscxd)
\end_layout

\end_inset

В выводе команды представлен 
\family typewriter
authDN 
\family default
--- пользователь, от имени которого осуществлен вход в дерево каталогов,
 а далее представлены права на доступ к записи в целом (
\family typewriter
entity
\family default
), права на унаследованные записи (
\family typewriter
child)и
\family default
 поля (
\family typewriter
cn=user1
\family default
,
\family typewriter
 sn=seuser
\family default
 и т.д.).
 В текущей версии политики пользователь может иметь право на запись только
 к своей записи.
 
\end_layout

\begin_layout Standard
Однако если ввести запрос:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# slapacl -b cn=user1,ou=Users,dc=ldap-server,dc=ru -D cn=user2,ou=Users,dc=ldap
-server,dc=ru
\end_layout

\end_inset


\end_layout

\begin_layout Standard
то будет выведено следующая информация:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

authcDN: "cn=user2,ou=users,dc=ldap-server,dc=ru"
\end_layout

\begin_layout Plain Layout

entry: read(=rscxd)
\end_layout

\begin_layout Plain Layout

children: read(=rscxd)
\end_layout

\begin_layout Plain Layout

cn=user1: read(=rscxd)
\end_layout

\begin_layout Plain Layout

sn=seuser: read(=rscxd)
\end_layout

\begin_layout Plain Layout

objectClass=seInetOrgPerson: read(=rscxd)
\end_layout

\begin_layout Plain Layout

userPassword=****: read(=rscxd)
\end_layout

\begin_layout Plain Layout

selinuxContext=user_u:user_r:user_t:s0-s3: read(=rscxd)
\end_layout

\begin_layout Plain Layout

uid=501: read(=rscxd)
\end_layout

\begin_layout Plain Layout

structuralObjectClass=seInetOrgPerson: read(=rscxd)
\end_layout

\begin_layout Plain Layout

entryUUID=e5543424-df1a-1032-970f-83b11b1d9dcb: read(=rscxd)
\end_layout

\begin_layout Plain Layout

creatorsName=cn=admin,dc=ldap-server,dc=ru: read(=rscxd)
\end_layout

\begin_layout Plain Layout

createTimestamp=20131111124532Z: read(=rscxd)
\end_layout

\begin_layout Plain Layout

entryCSN=20131111124532.017725Z#000000#000#000000: read(=rscxd)
\end_layout

\begin_layout Plain Layout

modifiersName=cn=admin,dc=ldap-server,dc=ru: read(=rscxd)
\end_layout

\begin_layout Plain Layout

modifyTimestamp=20131111124532Z: read(=rscxd)
\end_layout

\end_inset

Т.е.
 в текущей политике любой пользователь, не являющийся владельцем записи,
 имеет права только на чтение.
\end_layout

\begin_layout Standard

\family typewriter
\series bold
slapadd
\family default
\series default
 используется для добавления записей, указанных в формате LDIF в базу данных
 LDAP.
 Команда применяет LDIF к базе данных, определяемой по номеру базы данных
 или суффиксу.
 Входной LDIF считывается со стандартного входа, либо из указанного файла.
\end_layout

\begin_layout Standard

\family typewriter
\series bold
slapcat
\family default
\series default
 используется для генерации LDIF, основанных на содержимом базы данных LDAP.
 Она открывает базу данных, определяемую по номеру базы данных или суффиксу,
 и пишет соответствующий LDIF на стандартный вывод или в указанный файл.
 
\end_layout

\begin_layout Standard
Например:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# slapcat -a "((entryDN:dc=ldap-server,dc=ru))"
\end_layout

\end_inset


\end_layout

\begin_layout Standard
создаст дамп LDAP всего DN 
\family typewriter
dc=ldap-server,dc=ru
\family default
.
\end_layout

\begin_layout Standard

\family typewriter
\series bold
slappaswd 
\family default
\series default
необходим для генерации шифрованного пароля 
\family typewriter
rootDN
\family default
 и использовании в LDIF.
 Например:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# slappasswd -s secret -h {MD5}
\end_layout

\end_inset

создаст хэш MD5 от пароля 
\family typewriter
secret
\end_layout

\begin_layout Standard

\family typewriter
\series bold
slaptest
\family default
 
\series default
используется для проверки конфигурационных файлов LDAP, а также может быть
 использован для конвертации конфигурационных файлов в LDIF.
\end_layout

\begin_layout Subsubsection
\begin_inset CommandInset label
LatexCommand label
name "sub:Преобразование-SCHEMA-в"

\end_inset

Преобразование SCHEMA в LDIF
\end_layout

\begin_layout Standard
Формат 
\family typewriter
schema
\family default
 используется для статического подключения схем сущностей в LDAP.
 Иным вариантом является динамическое подключение схем с помощью 
\family typewriter
ldif
\family default
-схем.
 Динамические схемы могут быть загружены в LDAP подобно обычному запросу
 в каталог.
\end_layout

\begin_layout Standard
В качестве примера приведен алгоритм конвертации файла
\family typewriter
 example.schema
\family default
 в файл 
\family typewriter
example.ldif
\family default
:
\end_layout

\begin_layout Enumerate
Создать файл преобразования 
\family typewriter
/home/ldapuser/export.ldif
\family default
, в который импортируются данные 
\family typewriter
schema
\family default
-файлов:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

include /home/ldapuser/schema/core.schema
\end_layout

\begin_layout Plain Layout

include /home/ldapuser/schema/cosine.schema
\end_layout

\begin_layout Plain Layout

include /home/ldapuser/schema/nis.schema
\end_layout

\begin_layout Plain Layout

include /home/ldapuser/schema/inetorgperson.schema
\end_layout

\begin_layout Plain Layout

include /home/ldapuser/schema/example.schema
\end_layout

\end_inset

При этом требуется подключить все доступные схемы из каталога 
\family typewriter
/etc/openldap/schema
\family default
.
\end_layout

\begin_layout Enumerate
Создать каталог, в котором будут храниться конвертированные схемы:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# mkdir ldif
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Запустить процесс конвертации:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# slaptest -f /home/ldapuser/export.ldif -F /home/ldapuser/ldif
\end_layout

\end_inset

В случае успешного завершения будет выведено сообщение:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

config file testing succeeded
\end_layout

\end_inset

И при этом будет создано дерево каталогов 
\family typewriter
cn=config
\family default
 в 
\family typewriter
ldif
\family default
.
 Конвертированный файл будет иметь имя 
\family typewriter
cn={5}example.ldif
\family default
.
\end_layout

\begin_layout Enumerate
В конвертируемом файле требуется изменить записи:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: cn={5}example
\end_layout

\begin_layout Plain Layout

objectClass: olcSchemaConfig
\end_layout

\begin_layout Plain Layout

cn: {5}example
\end_layout

\end_inset

на следующие:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: cn=example,cn=schema,cn=config
\end_layout

\begin_layout Plain Layout

objectClass: olcSchemaConfig
\end_layout

\begin_layout Plain Layout

cn: example
\end_layout

\end_inset

и удалить все записи, начиная с 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

structuralObjectClass: olcSchemaConfig
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Скопировать конвертированную схему в каталог схем:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# cp ldif/cn
\backslash
=config/cn
\backslash
=schema/cn
\backslash
=
\backslash
{4
\backslash
}example.ldif /etc/openldap/schema/example.ldif
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
После чего можно загружать схему в OpenLDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapadd -x -W -D cn=config -f /etc/openldap/schema/example.ldif
\end_layout

\end_inset


\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
При выполнении данного алгоритма схема 
\family typewriter
example
\family default
 будет доступна для использования в OpenLDAP.
\end_layout

\begin_layout Standard
\begin_inset Newpage clearpage
\end_inset


\end_layout

\begin_layout Section
Настройка PostgreSQL с авторизацией LDAP
\end_layout

\begin_layout Standard
Для демонстрации работы метода авторизации LDAP в PostgreSQL предлагается
 развернуть стенд, состоящий из трех машин (
\emph on
см.
 рис.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Схема-разворачиваемого-стенда"

\end_inset


\emph default
).
 В качестве примера настройки стенда будет использоваться CentOS 6.4, PostgreSQL
 9.3 и OpenLDAP 2.4.23.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/LDAP.png
	scale 65

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Схема-разворачиваемого-стенда"

\end_inset

Схема разворачиваемого стенда
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Клиентская машина PostgreSQL (IP 192.168.100.2) содержит локального пользователя
 
\family typewriter
user1
\family default
.
 
\end_layout

\begin_layout Standard
Сервер OpenLDAP, доступный по IP 192.168.100.3 хранит записи о пользователе
 базы данных 
\family typewriter
user1 
\family default
и администраторе базы данных 
\family typewriter
postgres
\family default
 вместе с их паролями
\family typewriter
 
\family default
в системе каталогов LDAP.
 
\end_layout

\begin_layout Standard
Сервер базы данных PostgreSQL (IP 192.168.100.4) имеет администратора базы
 данных 
\family typewriter
postgres
\family default
, который является пользователем операционной системы, а также пользователя
 базы данных 
\family typewriter
user1 
\family default
в базе данных.
\end_layout

\begin_layout Standard

\series bold
Механизм авторизации по методу LDAP работает следующим образом:
\end_layout

\begin_layout Enumerate
Клиент подключается к серверу базы данных.
 
\end_layout

\begin_layout Enumerate
Сервер базы данных генерирует запрос серверу LDAP, содержащий имя пользователя
 на клиентской машине, от имени которого инициировалось подключение.
\end_layout

\begin_layout Enumerate
Сервер LDAP выдает запрос на ввод пароля от того пользователя, от имя которого
 передал сервер PostgreSQL.
\end_layout

\begin_layout Enumerate
Если запись эта пользователя найдена и введенный на клиентской машины совпадает
 с паролем, хранящемся в системе каталогов LDAP, то клиенту разрешается
 подключение, иначе --- доступ закрывается.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsection
Настройка клиентской машины
\end_layout

\begin_layout Standard
Для настройки клиентской машины требуется выполнить следующие действия:
\end_layout

\begin_layout Enumerate
Установить пакеты клиентского приложения 
\family typewriter
psql
\family default
 следующей командой:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# yum install -y postgresql93 postgresql93-libs
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Создать пользователя 
\family typewriter
user1
\family default
 и назначить ему пароль: 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# useradd user -p 123456
\end_layout

\end_inset


\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsection
Настройка сервера OpenLDAP
\end_layout

\begin_layout Standard
Для настройки openLDAP сервера требуется выполнить следующие действия:
\end_layout

\begin_layout Enumerate
Установить пакеты openLDAP командой:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# yum install -y openldap-{clients,servers}
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Открыть порт 
\family typewriter
389
\family default
 в межсетевом экране iptables.
 Для этого открыть на чтение 
\family typewriter
/etc/sysconfig/iptables
\family default
 и поместить следующую строку после всех 
\family typewriter
ACCEPT 
\family default
и до 
\family typewriter
REJECT
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

-A INPUT -p tcp --dport 389 -j ACCEPT
\end_layout

\end_inset

Таким образом, данная строка позволяет принимать запросы от других машин
 по порту 389.
 Изменение конфигурационного файла межсетевого экрана требует перезапуска:
 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# service iptables restart
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Создать пароль для администратора (
\family typewriter
RootDN
\family default
) сервера OpenLDAP.
 Для этого выполнить команду:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# slappasswd
\end_layout

\end_inset

Потребуется ввести желаемый пароль, а также его подтвердить.
 В результате работы этой команды будет выведена строка с хэшем пароля,
 например для пароля 
\family typewriter
123456 
\family default
будет выведен следующий хэш:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

{SSHA}US0VGNxhxro/QD3B4wIbjRa5re9i8cX1
\end_layout

\end_inset

Изменить настройки сервера OpenLDAP.
 Для этого:
\end_layout

\begin_deeper
\begin_layout Enumerate
Создать папку, в которой будут храниться все пользовательские LDIF:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# mkdir /etc/openldap/ldif
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Cоздать файл
\family typewriter
 config.ldif
\family default
 следующего содержания в этой папке:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: olcDatabase={0}config,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

add: olcRootPW
\end_layout

\begin_layout Plain Layout

olcRootPW: {SSHA}wxIXiCClyvjvT0YTjb8KT5KaIf9uT4TV 
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: olcDatabase={2}bdb,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

replace: olcSuffix
\end_layout

\begin_layout Plain Layout

olcSuffix: dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: olcDatabase={2}bdb,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

replace: olcRootDN
\end_layout

\begin_layout Plain Layout

olcRootDN: cn=admin,dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: olcDatabase={2}bdb,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

add: olcRootPW
\end_layout

\begin_layout Plain Layout

olcRootPW: {SSHA}US0VGNxhxro/QD3B4wIbjRa5re9i8cX1
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: olcDatabase={2}bdb,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

replace: olcAccess
\end_layout

\begin_layout Plain Layout

olcAccess: {0}to attrs=userPassword by self write by dn.base="cn=admin,dc=ldap-se
rver,dc=ru" write by anonymous auth by * none
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: olcDatabase={2}bdb,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

add: olcAccess
\end_layout

\begin_layout Plain Layout

olcAccess: {1}to * by dn.base="cn=admin,dc=ldap-server,dc=ru" write by self
 write by * read
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: olcDatabase={1}monitor,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

replace: olcAccess
\end_layout

\begin_layout Plain Layout

olcAccess:  {0}to * by dn.base="gidNumber=0+uidNumber=0,cn=peercred,cn=external,c
n=auth" read by dn.base="cn=admin,dc=ldap-server,dc=ru" read by * none
\end_layout

\end_inset

В качестве примера рассмотрим описание запроса, представленного в первом
 блоке:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: olcDatabase={0}config,cn=config
\end_layout

\begin_layout Plain Layout

changetype: modify
\end_layout

\begin_layout Plain Layout

add: olcRootPW
\end_layout

\begin_layout Plain Layout

olcRootPW: {SSHA}wxIXiCClyvjvT0YTjb8KT5KaIf9uT4TV 
\end_layout

\end_inset

В первой строке указывается, что объект запроса --- сущность 
\family typewriter
cn=config/olcDataBase={0}config.ldif
\family default
, 
\family typewriter
changetype: modify
\family default
 указывает базе данных на то, что сущность изменяется.
 Изменение описывается в следующей строке: 
\family typewriter
add: olcRootPW
\family default
.
 Т.е добавляется аторибут 
\family typewriter
oclRootPW
\family default
.
 В последней строке указывается значение этого поля.
 Так как это изменение применяется для атрибута пароля, то значение этого
 поля --- хэш пароля, выдаваемого утилитой 
\family typewriter
slappaswd
\family default
.
\end_layout

\begin_layout Enumerate
Первый запрос устанавливает поля пароля для базы данных 
\family typewriter
config
\family default
, которая хранит служебную информацию о каталоге.
\begin_inset Newline newline
\end_inset

Второй запрос изменяет имя домена сервера openLDAP.
\begin_inset Newline newline
\end_inset

В третьем блоке устанавливается имя администратора каталога 
\family typewriter
admin
\family default
.
\begin_inset Newline newline
\end_inset

В четвертом --- устанавливается пароль администратора каталога.
\begin_inset Newline newline
\end_inset

Во всех остальных устанавливается политика безопасности каталога 
\family typewriter
cn=admin,dc=ldap-server,dc=ru
\family default
.
\end_layout

\begin_layout Enumerate
Осуществить загрузку изменений в LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapmodify -Y EXTERNAL -H ldapi:/// -f /etc/openldap/ldif/config.ldif
\end_layout

\end_inset

Успешное выполнение этого запроса предполагает вывод строк, содержащих фразу
 
\begin_inset Quotes fld
\end_inset


\family typewriter
modifying entity <entity_name>
\family default

\begin_inset Quotes frd
\end_inset

 .
\end_layout

\end_deeper
\begin_layout Enumerate
Настроить систему логов.
 Для этого требуется:
\end_layout

\begin_deeper
\begin_layout Enumerate
Создать файл 
\family typewriter
/var/log/openldap.log
\family default
 --- файл логов сервера LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# touch /var/log/openldap.log
\end_layout

\end_inset

Назначить владельца логов 
\family typewriter
ldap.ldap
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# chown ldap.ldap /var/log/openldap.log
\end_layout

\end_inset

Установить права 600 на лог-файл:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# chmod 600 /var/log/openldap.log
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Добавить следующую строку, позволив демону логирования 
\family typewriter
rsyslog 
\family default
перенаправлять все сообщения LDAP-сервера в созданный ранее файл логов:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

local4.*	-/var/log/openldap.log
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Перезапустить демон 
\family typewriter
rsyslog
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# service rsyslog restart
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Enumerate
Скопировать файл 
\family typewriter
DB_CONFIG.example 
\family default
в каталог базы данных LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# cp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG
\end_layout

\end_inset

и назначить папке владельца 
\family typewriter
ldap.ldap
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# chown -R ldap.ldap /var/lib/ldap
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Создать корневой элемент 
\family typewriter
dc=ldap-server,dc=ru
\family default
 в LDAP:
\end_layout

\begin_deeper
\begin_layout Enumerate
Создать файл 
\family typewriter
root.ldif
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

objectClass: dcObject
\end_layout

\begin_layout Plain Layout

objectClass: organization
\end_layout

\begin_layout Plain Layout

dc: ldap-server
\end_layout

\begin_layout Plain Layout

o : ldap-server
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Загрузить его в LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapadd -f /etc/openldap/ldif/root.ldif -D cn=admin,dc=ldap-server,dc=ru
 -W
\end_layout

\end_inset

При выполнении этой команды требуется ввести пароль администратора 
\family typewriter
admin
\family default
 LDAP
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
При выполнении этой команды можно использовать ключ 
\family typewriter
-w
\family default
, после чего ввести пароль в открытом виде.
\end_layout

\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
Создать сущности групп (
\family typewriter
Admins
\family default
, 
\family typewriter
Users
\family default
) в файле 
\family typewriter
groups.ldif
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: ou=Admins,dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

objectClass: organizationalUnit
\end_layout

\begin_layout Plain Layout

ou: Admins
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

dn: ou=Users,dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

objectClass: organizationalUnit
\end_layout

\begin_layout Plain Layout

ou: Users
\end_layout

\end_inset

и загрузить их в LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# ldapadd -f /etc/openldap/ldif/groups.ldif -D cn=admin,dc=ldap-server,dc=ru
 -W
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Создать сущность пользователей 
\family typewriter
users.ldif 
\family default
и загрузить ее в LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: cn=user,ou=Users,dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

cn: user (remote)
\end_layout

\begin_layout Plain Layout

sn: user
\end_layout

\begin_layout Plain Layout

objectClass: inetOrgPerson
\end_layout

\begin_layout Plain Layout

userPassword: {SSHA}csBKk4Ei9q0eOgBA8TNLWCio7bvg97BI
\end_layout

\begin_layout Plain Layout

uid: 501
\end_layout

\end_inset

где 
\family typewriter
userPassword
\family default
 содержит
\family typewriter
 
\family default
хэшированное значение пароля, созданное с помощью 
\family typewriter
slappaswd
\family default
, 
\family typewriter
uid
\family default
 --- идентификатор пользователя в системе на клиентской машине.
\end_layout

\begin_layout Enumerate
Создать сущность администраторов СУБД PostgreSQL и загрузить ее в LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: cn=postgres,ou=Admins,dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

cn: postgres admin
\end_layout

\begin_layout Plain Layout

sn: admin
\end_layout

\begin_layout Plain Layout

objectClass: inetOrgPerson
\end_layout

\begin_layout Plain Layout

userPassword: {SSHA}iPxDsPOHV3HNjwLmpfYxnOOyysKImJYH
\end_layout

\begin_layout Plain Layout

uid: 26
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Добавить демон LDAP 
\family typewriter
slapd 
\family default
в список запущенных при запуске системы:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# echo "service slapd start" >> /etc/init.d/rc.local
\end_layout

\end_inset


\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsection
Настройка сервера PostgreSQL
\end_layout

\begin_layout Enumerate
Установить пакеты сервера:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# yum install postgresql93 postgresql93-server
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Инициализировать сервер базы данных:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# service postgresql93 initdb
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Установить спектр адресов, с которых возможно подключение к серверу базы
 данных: 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

listen_addresses = '*'
\end_layout

\end_inset

в файле 
\family typewriter
/var/lib/pgsql/9.3/data/pg_hba.conf
\end_layout

\begin_layout Enumerate
Установить метод авторизации ldap в 
\family typewriter
pg_hba.conf
\family default
 
\begin_inset CommandInset citation
LatexCommand cite
key "LDAP-PostgreSQL"

\end_inset

:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

local all all ldap ldapserver=192.168.100.3 ldapprefix="cn=" ldapsuffix=",ou=Admins
,dc=ldap-server,dc=ru"
\end_layout

\begin_layout Plain Layout

host all all 192.168.100.2/32 ldap ldapserver=192.168.100.3 ldapprefix="cn=" ldapsuffi
x=",ou=Users,dc=ldap-server,dc=ru"
\end_layout

\end_inset

В первой строке разрешается подключаться локально (с IP 
\family typewriter
127.0.0.1
\family default
) к любой баз данных с использованием метода авторизации ldap.
 Сам метод авторизации задается тремя полями: 
\family typewriter
ldapserver 
\family default
--- IP LDAP-сервера авторизации, 
\family typewriter
ldapprefix 
\family default
--- имя пользователя LDAP, от имени которого разрешается авторизоваться
 (в данном случае оно пустое и LDAP подставляет имя пользователя ОС), 
\family typewriter
ldapsuffix
\family default
 --- строка, которая добавляется к имени пользователя при авторизации (фактическ
и, это пусть в иерархии каталогов).
 В данном случае разрешается подключаться к базе данных любому пользователю
 из группы 
\family typewriter
Admins
\family default
.
\begin_inset Newline newline
\end_inset

Во второй строке разрешается удаленное подключение к базе данных с IP адреса
 
\family typewriter
192.168.100.2
\family default
 (Клиентской машины) любому пользователю из группы 
\family typewriter
Users
\family default
.
\end_layout

\begin_layout Enumerate
Открыть порт 5432 в межсетевом экране iptables:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

-A INPUT -m state --state NEW -m tcp -p tcp --sport 5432 -j ACCEPT
\end_layout

\begin_layout Plain Layout

-A INPUT -p tcp -m tcp --sport 1024:65535 --dport 5432 -j ACCEPT
\end_layout

\begin_layout Plain Layout

-A OUTPUT -p tcp -m tcp --sport 1024:65535 --dport 5432 -j ACCEPT
\end_layout

\end_inset

После чего перезапустить iptables:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# service iptables restart
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Перезапустить сервер базы данных PostgreSQL:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# service postgresql93 restart
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Создать базу данных 
\family typewriter
testdb
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

$ createdb testdb
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Создать пользователей базы данных:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

psql -c "CREATE USER user1 nocreatedb nocreateuser;"
\end_layout

\end_inset

При выполнении команды потребуется ввести пароль пользователя 
\family typewriter
postgres
\family default
 в LDAP.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Subsection
Проверка работы механизма авторизации LDAP в PostgreSQL
\end_layout

\begin_layout Standard
При каждой авторизации в клиенте psql требуется вводить пароль того пользователя
, от имени которого происходит авторизация в базе данных.
\end_layout

\begin_layout Standard
Пусть пользователь зашел на сервере PostgreSQL как пользователь 
\family typewriter
root
\family default
 и пытается подключиться к базе данных локально:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# psql testdb
\end_layout

\end_inset

При этом сервером базы данных генерируется следующий запрос серверу каталогов
 LDAP:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

cn=root,ou=Admins,dc=ldap-server,dc=ru
\end_layout

\end_inset

Так как сущность пользователя 
\family typewriter
root 
\family default
не содержится в настроенном сервере LDAP, то в доступе будет отказано:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

psql: FATAL: LDAP authentication failed for user "root"
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Если же пользователь зашел в систему как пользователь 
\family typewriter
postgres
\family default
, то ему будет разрешено подключение.
\end_layout

\begin_layout Standard
Авторизация удаленно (с клиентской машины) пользователем 
\family typewriter
postgres 
\family default
с помощью команды
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

# psql -U postgres -h 192.168.100.4 testdb
\end_layout

\end_inset


\family typewriter
 
\family default
будет отклонена, т.к.
 пользователь 
\family typewriter
postgres 
\family default
не состоит в группе 
\family typewriter
Users
\family default
:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

psql: FATAL: LDAP authentication failed for user "postgres"
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Однако авторизация пользователем 
\family typewriter
user1
\family default
 и другими пользователями из этой группы LDAP будет разрешена:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

$ psql -h 192.168.100.4 testdb
\end_layout

\end_inset


\end_layout

\begin_layout Standard
При этом в базе данных будет идентифицировано подключение пользователя 
\family typewriter
user1
\family default
: 
\begin_inset listings
inline false
status open

\begin_layout Plain Layout


\backslash
conninfo
\end_layout

\begin_layout Plain Layout

connected to database "testdb" as user "user1" on host "192.168.100.4" at port
 "5432"
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
\paragraph_spacing onehalf
Проектирование механизма хранения и передачи контекста SELinux в OpenLDAP
\end_layout

\begin_layout Standard
Предложенный метод реализации разграничения прав доступа пользователей предполаг
ает возможность входа пользователей удаленной машины 
\family typewriter
user1
\family default
, 
\family typewriter
user2
\family default
 и 
\family typewriter
user3
\family default
 с помощью команды:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

//Команда выполняется от пользователя user1
\end_layout

\begin_layout Plain Layout

$ psql -U user2 -h 192.168.100.4 testdb
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Т.е.
 в случае, если пользователь знает пароль 
\family typewriter
user2
\family default
, то он может зайти в базу данных с его правами.
 Для предотвращения подобной ситуации предлагается спроектировать механизм
 передачи контекста SELinux в OpenLDAP для мандатного разграничения доступа.
 Данный механизм предполагает передачу контекста безопасности в OpenLDAP
 для дополнительного контроля авторизации.
 На 
\emph on
рисунке 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Схема-механизма-передачи"

\end_inset

 
\emph default
приведена схема механизма передачи метки контекста SELinux.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename files/SELDAP.png
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Схема-механизма-передачи"

\end_inset

Схема механизма передачи контекста SELinux
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\paragraph_spacing single
Предполагается, что механизм будет работать по следующей схеме:
\end_layout

\begin_layout Enumerate
\paragraph_spacing single
Клиент подключается к базе данных и передает имя и контекст подключающегося
 пользователя.
\end_layout

\begin_layout Enumerate
\paragraph_spacing single
PostgreSQL делает запрос в сервер OpenLDAP и передает данные пользователя.
\end_layout

\begin_layout Enumerate
\paragraph_spacing single
LDAP ищет запись с параметрами пользователя, при этом проверяет контекст
 пользователя по модели Белл-ла Падула.
\end_layout

\begin_layout Enumerate
\paragraph_spacing single
Если проверка имени пользователя, пароля и контекста прошла успешно, то
 пользователю разрешается подключиться к базе данных, иначе соединение между
 клиентом и базой данных разрывается.
 
\end_layout

\begin_layout --Separator--
\paragraph_spacing single

\end_layout

\begin_layout Standard
\paragraph_spacing single
Так как отсутствуют схемы хранения и проверки контекста SELinux в OpenLDAP,
 то предлагается создать схему на основе 
\family typewriter
InetOrgPerson
\family default
: 
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

objectclass	( 2.16.840.1.113730.3.2.901
\end_layout

\begin_layout Plain Layout

    NAME 'seInetOrgPerson'
\end_layout

\begin_layout Plain Layout

	DESC 'Security Internet Organizational Person'
\end_layout

\begin_layout Plain Layout

    SUP organizationalPerson
\end_layout

\begin_layout Plain Layout

    STRUCTURAL
\end_layout

\begin_layout Plain Layout

    MUST ( cn $ userPassword $ selinuxContext )
\end_layout

\begin_layout Plain Layout

	MAY ( uid )
\end_layout

\begin_layout Plain Layout

	)
\end_layout

\end_inset


\end_layout

\begin_layout Standard
В первой строке указывается идентификатор класса.
 Он выбран таким образом, чтобы не было совпадений уже с существующими классами
 LDAP.
 Директивой 
\family typewriter
NAME 
\family default
определяется имя нового класса.
 В следующей строке указывается описание.
 
\end_layout

\begin_layout Standard
Ключевым словом 
\family typewriter
SUP
\family default
 указывается класс-родитель, от которого наследуется создаваемый класс.
 По идеологии LDAP при наследовании в классе-наследнике доступны все поля
 родительского класса.
 Ключевым словом 
\family typewriter
STRUCTURAL 
\family default
определяется возможность использовать класс в создании схем.
\end_layout

\begin_layout Standard
После чего директивой 
\family typewriter
MUST
\family default
 указываются требуемые поля в классе.
 В данном случае это: 
\family typewriter
cn 
\family default
--- имя объекта (
\family typewriter
Common Name
\family default
), 
\family typewriter
userPassword 
\family default
--- пароль пользователя, 
\family typewriter
selinuxContext 
\family default
--- контекст пользователя SELinux.
 В качестве необязательных в данном классе может присутствовать 
\family typewriter
uid
\family default
, определяющий uid пользователя клиентской машины.
 
\end_layout

\begin_layout Standard
При определении класса был объявлен атрибут 
\family typewriter
selinuxContext
\family default
, описанный следующим образом:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

attributetype ( 2.16.840.1.113730.3.1.900
\end_layout

\begin_layout Plain Layout

	NAME 'selinuxContext'
\end_layout

\begin_layout Plain Layout

	DESC 'SeLinuxContext for LDAP'
\end_layout

\begin_layout Plain Layout

	EQUALITY caseExactMatch
\end_layout

\begin_layout Plain Layout

	SUBSTR caseIgnoreSubstringsMatch
\end_layout

\begin_layout Plain Layout

	SYNTAX 1.3.6.1.4.1.1466.115.121.1.15
\end_layout

\begin_layout Plain Layout

	SINGLE-VALUE )
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Назначение идентификатора, 
\family typewriter
NAME 
\family default
и 
\family typewriter
DESC 
\family default
описывалось выше.
 С помощью директивы 
\family typewriter
EQULITY 
\family default
задается правило сравнения (чувствительное к регистру, но нечувствительное
 к количеству пробелов).
 В следующей строке определяется правило сравнения для подстроки.
 В данном случае это 
\family typewriter
caseIgnoreSubstringsMatch 
\family default
--- нечувствительное к регистру, нечувствительное к количеству пробельных
 символов значение подстроки.
 В следующей строке с помощью ключевого слова 
\family typewriter
SYNTAX
\family default
 указывается тип данных, который применяется здесь в качестве значения.
 В данном случае идентификатор указывает на Unicode-строку.
\end_layout

\begin_layout Standard

\family typewriter
SINGLE-VALUE
\family default
,
\family typewriter
 
\family default
указанное в конце объявления атрибута запрещает классу иметь более одного
 такого атрибута.
 
\end_layout

\begin_layout Standard
Данный класс изначально записывается в файл 
\family typewriter
seinetorgperson.schema
\family default
, но может быть преобразован к LDIF-файлу по инструкции 
\emph on
пункта 
\begin_inset CommandInset ref
LatexCommand ref
reference "sub:Преобразование-SCHEMA-в"

\end_inset


\emph default
.
\end_layout

\begin_layout Standard
После успешной загрузки данный класс можно использовать для создания новых
 сущностей в дереве:
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

dn: cn=seuser,ou=Users,dc=ldap-server,dc=ru
\end_layout

\begin_layout Plain Layout

cn: security user
\end_layout

\begin_layout Plain Layout

sn: seuser
\end_layout

\begin_layout Plain Layout

objectClass: seinetOrgPerson
\end_layout

\begin_layout Plain Layout

userPassword: {SSHA}csBKk4Ei9q0eOgBA8TNLWCio7bvg97BI
\end_layout

\begin_layout Plain Layout

selinuxContext: user_u:user_r:user_t:s0-s3
\end_layout

\begin_layout Plain Layout

uid: 501
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Таким образом, LDAP обладает возможностью настройки прав доступа к объектам
 на основе иерархической структуры, гибок при настройке и может быть использован
 для использования в качестве методов авторизации в PostgreSQL.
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Section*
Заключение
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
addcontentsline{toc}{part}{Заключение}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Данная учебно-исследовательская работа посвящена исследованию основных методов
 авторизации в системе управления базами данных PostgreSQL.
\end_layout

\begin_layout Standard
Были достигнуты основные результаты:
\end_layout

\begin_layout Enumerate
Произведено исследование основных методов авторизации в PostgreSQL.
 Выявлены их достоинства и недостатки.
\end_layout

\begin_layout Enumerate
Исследованы возможности сервера OpenLDAP.
\end_layout

\begin_layout Enumerate
Описан процесс настройки метода авторизации LDAP в PostgreSQL.
 
\end_layout

\begin_layout Enumerate
Предложен механизм интеграции средств мандатного разграничения доступа с
 OpenLDAP, а также реализована схема хранения контекста безопасности в OpenLDAP.
\end_layout

\begin_layout --Separator--

\end_layout

\begin_layout Standard
В целом можно судить о достижении поставленной цели.
 Продолжением темы учебно-исследовательской работы может послужить программная
 реализация механизма и передачи контекста безопасности в OpenLDAP сервер.
\end_layout

\begin_layout Standard

\color black
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
addcontentsline{toc}{part}{Список литературы}
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "Литература"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "1"
key "Kerberos"

\end_inset

 Протокол сетевой аутентификации Kerberos 5 [Электронный ресурс] --- http://www.i
xbt.com/comm/kerberos5.shtml
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "2"
key "Kerberos-man"

\end_inset

 John T.
 Kohl, B.
 Clifford Neuman, Theodore Y.
 Ts’o --- The Evolution of the Kerberos Authentication Service 
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "3"
key "Ident"

\end_inset

Identification protocol (RFC1413) [Электронный ресурс] --- http://www.faqs.org/rfc
s/rfc1413.html
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "4"
key "Peer"

\end_inset

PostgreSQL: Documentation: 9.3: Authentication Methods: 19.3.7.
 Peer Authentication [Электронный ресурс] ---
\begin_inset Newline newline
\end_inset

 http://www.postgresql.org/docs/9.3/static/auth-methods.html 
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "5"
key "PAM"

\end_inset

 Как работает PAM [Электронный ресурс] --- http://www.opennet.ru/base/net/pam_linu
x.txt.html
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "6"
key "LDAP"

\end_inset

Руководство администратора OpenLDAP [Электронный ресурс] --- http://www.pro-ldap.r
u/tr/admin24/
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "7"
key "LDAP-for-rocket-scientist"

\end_inset

LDAP for Rocket Scientists --- http://www.pro-ldap.ru/tr/zytrax/
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "8"
key "LDAP-PostgreSQL"

\end_inset

PostgreSQL: Documentation: 9.3: Authentication Methods: 19.3.8.
 LDAP Authentication [Электронный ресурс] --- http://www.postgresql.org/docs/9.3/st
atic/auth-methods.html 
\end_layout

\end_body
\end_document
